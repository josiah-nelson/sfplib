name: "SFPLiberate"
version: "0.1.0"
slug: "sfplib"
description: "Bluetooth companion for Ubiquiti SFP Wizard - capture, clone, and manage SFP module EEPROM profiles"
url: "https://github.com/josiah-nelson/SFPLiberate"

stage: experimental
arch:
  - aarch64
  - amd64
  - armhf
  - armv7

apparmor: false
init: false
startup: services
boot: auto
timeout: 120
watchdog: "http://[HOST]:[PORT:80]/health"
ingress: true
ingress_port: 80
ingress_entry: /
panel_icon: mdi:ethernet
panel_title: SFPLiberate
webui: "http://[HOST]:[PORT:80]"

# Bluetooth access required
host_dbus: true
hassio_role: default
hassio_api: true
homeassistant_api: true
auth_api: true

# Persistence
map:
  - config:rw
  - share:rw

options:
  log_level: "info"
  auto_discover: true
  device_name_patterns:
    - "SFP"
    - "Wizard"
  connection_timeout: 30
  device_expiry_seconds: 300
  scan_interval: 5
  rssi_threshold: -80
  max_devices: 50
  bluetooth_adapter: "default"
  enable_metrics: false
  database_backup_enabled: true
  database_backup_interval: 24
  database_backup_max_count: 7
  enable_debug_ble: false
  ble_trace_logging: false
  enable_debug_tools: true

schema:
  log_level: list(debug|info|warning|error)
  auto_discover: bool
  device_name_patterns: [str]
  connection_timeout: int(10,120)
  device_expiry_seconds: int(60,600)
  scan_interval: int(1,60)
  rssi_threshold: match(^-([3-9][0-9]|100)$)
  max_devices: int(10,200)
  bluetooth_adapter: match(default|hci[0-9]+)?
  enable_metrics: bool
  database_backup_enabled: bool
  database_backup_interval: int(1,168)
  database_backup_max_count: int(1,30)
  enable_debug_ble: bool
  ble_trace_logging: bool
  enable_debug_tools: bool

# Image configuration
image: "ghcr.io/josiah-nelson/sfplib-addon-{arch}"
